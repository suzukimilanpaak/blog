---
layout: post
title: Note when installing Rails3 with RVM
date: '2010-10-11T14:49:00.009+01:00'
author: Suzuki MilanPaak
tags:
- Ruby/ Ruby on Rails
modified_time: '2011-10-26T11:33:09.327+01:00'
blogger_id: tag:blogger.com,1999:blog-6758697817819098194.post-1604273215050674715
blogger_orig_url: http://engineerflies.blogspot.com/2010/10/note-when-installing-rails3-with-rvm.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><h1>Prerequisite</h1><br /><br />- ruby &gt;= 1.8.7 but <a href="http://edgeguides.rubyonrails.org/3_0_release_notes.html#rails-3-requires-at-least-ruby-1-8-7">p248 and p249 crashes rails3</a><br /><br />- gem &gt;= 1.3.6<br /><br /><br /><h1>My environment</h1><br /><br />- Ubuntu<br /><pre class="prettyprint">$ cat /etc/lsb-release<br />DISTRIB_ID=Ubuntu<br />DISTRIB_RELEASE=9.10<br />DISTRIB_CODENAME=karmic<br />DISTRIB_DESCRIPTION="Ubuntu 9.10"</pre><br /><br />- Rvm<br /><pre class="prettyprint">$ rvm -v<br />rvm 0.1.44 </pre><br /><br />To update your rvm to the latest version run the following command;<br /><pre class="prettyprint">$ rvm update</pre><br /><br />Since the version of ruby gems in my environment (Ubuntu karmic) is 1.3.5, I decided to use RVM and install ruby 1.8.7 (for a compatibility of other applications) and use rubygem 1.3.7.<br /><br /><br /><h1>Installation</h1><br /><br /><pre class="prettyprint">$ rvm notes<br />Notes for Linux ( DISTRIB_ID=Ubuntu<br />DISTRIB_RELEASE=9.10<br />DISTRIB_CODENAME=karmic<br />DISTRIB_DESCRIPTION="Ubuntu 9.10" )<br /><br /><br />*  NOTE: MRI stands for Matz's Ruby Interpreter (1.8.X, 1.9.X), ree stands for Ruby Enterprise Edition and rbx stands for Rubinius.<br /><br /><br />*  curl is required.<br /><br />*  patch is required (for ree, some ruby head's).<br /><br />*  If you wish to install rbx and/or any MRI head (eg. 1.9.2-head) then you must install and use rvm 1.8.7 first.<br /><br />*  For JRuby (if you wish to use it) you will need:<br />$ aptitude install curl sun-java6-bin sun-java6-jre sun-java6-jdk<br />*  For MRI &amp; ree (if you wish to use it) you will need (depending on what you are installing):<br />$ aptitude install build-essential bison openssl libreadline5 libreadline-dev curl git-core zlib1g zlib1g-dev libssl-dev vim libsqlite3-0 libsqlite3-dev sqlite3 libreadline5-dev libreadline6-dev libxml2-dev git-core subversion autoconf<br />*  For IronRuby (if you wish to use it) you will need:<br />$ aptitude install curl mono-2.0-devel</pre><br /><br /><br />It is recommended to install the following packages beforehand because, without these, I encountered errors saying 'no such file to load' by ruby.<br /><br /><pre class="prettyprint">$ rvm pkg install iconv <br />$ rvm pkg install readline <br />$ rvm pkg install zlib<br />$ rvm pkg install autoconf<br />$ rvm pkg install openssl<br /><br />$ export PATH=$HOME/.rvm/bin:$PATH<br /><br /># To list all rubies you can install;<br />$ rvm list known<br /><br />$ rvm install ruby-1.8.7-p299  -C --with-readline-dir=$HOME/.rvm/usr --with-iconv-dir=$HOME/.rvm/usr  --with-zlib-dir=$HOME/.rvm/usr --with-openssl-dir=$HOME/.rvm/usr<br /><br />$ rvm use 1.8.7 &amp;&amp; ruby -v<br />info: Using ruby 1.8.7 p299<br />ruby 1.8.7 (2010-06-23 patchlevel 299) [i686-linux]<br /><br />$ gem -v<br />1.3.7</pre><br /><br/><br/>If you got an error like bellow, one of packages above may not be correctly installed. <br/><pre class="prettyprint"><br />$ bundle exec rails c production<br />/home/suzukimilanpaak/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/irb/completion.rb:9:in `require': no such file to load -- readline (LoadError)<br /> from /home/suzukimilanpaak/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/irb/completion.rb:9:in `<top (required)>'<br /> from /home/suzukimilanpaak/.rvm/gems/ruby-1.9.2-p290@global/gems/railties-3.0.9/lib/rails/commands/console.rb:3:in `require'<br /> from /home/suzukimilanpaak/.rvm/gems/ruby-1.9.2-p290@global/gems/railties-3.0.9/lib/rails/commands/console.rb:3:in `<top (required)>'<br /> from /home/suzukimilanpaak/.rvm/gems/ruby-1.9.2-p290@global/gems/railties-3.0.9/lib/rails/commands.rb:20:in `require'<br /> from /home/suzukimilanpaak/.rvm/gems/ruby-1.9.2-p290@global/gems/railties-3.0.9/lib/rails/commands.rb:20:in `<top (required)>'<br /></pre> If this's the case, execute following commands to reset ruby with newly compiled packages <pre class='prettyprint'><br />rvm remove 1.9.2 <br />rvm cleanup all<br />rvm pkg install readline<br />rvm install ruby-1.9.2<br /></pre><br/> <br /><br />Install Rails3 (Do not sudo when you using RVM, which will cause a permission denial or unreachable path when running console, a server and a rake task in your user privilege)<br /><pre class="prettyprint">$ gem install rails -v 3.0.0</pre><br /><br />Got this notice by rails -h<br /><pre class="prettyprint">$ rails -h</pre><br /><br />Could not find gem 'mysql2 (&gt;= 0, runtime)' in any of the gem sources.<br />Try running `bundle install`.<br /><br /><pre class="prettyprint">$ bundle install<br />Fetching source index for http://rubygems.org/<br />Using rake (0.8.7) <br />Using abstract (1.0.0) <br />:<br />:<br />Using railties (3.0.0) <br />Using rails (3.0.0) <br />Your bundle is complete! Use `bundle show [gemname]` to see where a bundled gem is installed.<br /><br />Your bundle was installed to `/home/tatsuya/.rvm/gems/ruby-1.8.7-p299`</pre><br /><br /><br /><br /><h1>Create a new application</h1>$ rails new apns<br /><br /><pre class="prettyprint">$ rails server</pre></div>